
# SODA v1.5: Sistema Operacional de Desenvolvimento Ag√™ntico

O Paradigma S.O.D.A. (Spec-Oriented Dockerized Architecture): Uma Arquitetura Neuro-Adaptativa para Engenharia Agentica no Google Antigravity
## 1. Introdu√ß√£o: A Converg√™ncia entre Neurodiversidade e Engenharia de Agentes

A evolu√ß√£o dos Ambientes de Desenvolvimento Integrados (IDEs) para Plataformas Agenticas, exemplificada pelo Google Antigravity, representa uma ruptura fundamental na forma como o software √© constru√≠do. N√£o se trata mais apenas de editar texto, mas de orquestrar intelig√™ncia. Para o perfil neurocognitivo espec√≠fico de **Altas Habilidades/Superdota√ß√£o (AH-SD) com TDAH**, esta transi√ß√£o oferece uma oportunidade sem precedentes de alinhar a capacidade de processamento cognitivo (o "hardware" biol√≥gico de alta performance) com um sistema operacional externo que mitiga os d√©ficits de fun√ß√£o executiva (a "mem√≥ria RAM" biol√≥gica vol√°til).

Este relat√≥rio define e refina o conceito de **SODA** ‚Äî aqui formalizado como **Spec-Oriented Dockerized Architecture** (Arquitetura Agentica Dockerizada Orientada a Especifica√ß√µes). Esta estrutura n√£o √© apenas um conjunto de ferramentas; √© um "Exoc√≥rtex" projetado para externalizar a mem√≥ria de trabalho, impor disciplina processual atrav√©s de SOPs (Procedimentos Operacionais Padr√£o) e garantir a seguran√ßa operacional atrav√©s de segmenta√ß√£o modal.

### 1.1 O Imperativo Neuro-Adaptativo: AH-SD e o "Desgaste de Contexto"

O usu√°rio identifica-se com o perfil AH-SD/TDAH. Em termos de engenharia de software, este perfil caracteriza-se frequentemente por uma capacidade excepcional de visualiza√ß√£o arquitetural e resolu√ß√£o de problemas complexos (Hiperfoco), contraposta por uma fragilidade na manuten√ß√£o de estado a curto prazo e avers√£o a tarefas repetitivas (D√©ficit Executivo).

O problema central identificado na solicita√ß√£o √© o "desgaste da janela de contexto" e a sobrecarga cognitiva de instruir repetidamente o agente. No contexto de LLMs (Large Language Models), o "desgaste" √© t√©cnico (o modelo perde precis√£o √† medida que a janela de tokens enche). No contexto humano, o desgaste √© neuroqu√≠mico (a fadiga de decis√£o ao gerenciar m√∫ltiplos contextos).

A arquitetura SODA proposta resolve isso atrav√©s de tr√™s pilares:
1. **Persist√™ncia Externa (SOPs/BMad/OpenSpec):** O estado do projeto nunca reside apenas na "cabe√ßa" do agente ou do usu√°rio, mas em arquivos estruturados.
2. **Segmenta√ß√£o Modal (Docker Gateway):** Ferramentas s√£o isoladas e invocadas apenas quando necess√°rias, mantendo o "ru√≠do" baixo.
3. **Mem√≥ria Recursiva e Infinita (RLM/OpenMemory/Ralph):** O sistema "lembra" para que o usu√°rio possa se dar ao luxo de "esquecer" temporariamente e focar na cria√ß√£o.

## 2. O Ambiente Hospedeiro: Google Antigravity e a Mudan√ßa de Paradigma

O Google Antigravity serve como o sistema operacional para esta arquitetura. Diferente de copilotos que vivem na barra lateral (sidebar), o Antigravity oferece uma "Superf√≠cie de Gerenciamento" onde os agentes s√£o atores de primeira classe.

### 2.1 Da "Vibe Coding" √† Engenharia Estruturada

O termo "Vibe Coding" refere-se √† gera√ß√£o de c√≥digo baseada em prompts ad-hoc e intui√ß√£o moment√¢nea. Embora r√°pido, √© fr√°gil e propenso a erros de contexto ‚Äî um perigo para o TDAH, que pode perder o fio da meada. O SODA for√ßa a transi√ß√£o para a Engenharia Agentica:
- **Editor View:** Onde o usu√°rio AH-SD aplica sua criatividade direta e refinamento manual.
- **Manager Surface:** Onde o usu√°rio atua como "Arquiteto de Sistemas", delegando a execu√ß√£o para agentes ass√≠ncronos.

### 2.2 O Papel dos Artefatos na Valida√ß√£o Cognitiva

O Antigravity utiliza "Artefatos" (planos de implementa√ß√£o, grava√ß√µes de navegador) em vez de logs lineares de texto. Para o AH-SD, isso √© crucial. A leitura linear de logs longos induz √† fadiga atencional. Artefatos visuais e estruturados permitem uma valida√ß√£o r√°pida ("Scan and Verify"), alinhando-se com a velocidade de processamento visual superior t√≠pica da superdota√ß√£o.

## 3. Arquitetura Som√°tica: O Gateway Docker e a Segmenta√ß√£o Modal

A exig√™ncia de "Segmenta√ß√£o Modal" √© a pedra angular da seguran√ßa e da higiene de contexto nesta arquitetura. Utilizaremos o **Docker MCP Toolkit** n√£o apenas como um lan√ßador de ferramentas, mas como um roteador inteligente que define "Modos de Opera√ß√£o".

### 3.1 A Teoria da Segmenta√ß√£o Modal via Gateway

Um agente "generalista" com acesso a 50 ferramentas simultaneamente sofre de paralisia de decis√£o e alucina√ß√£o de esquemas. A Segmenta√ß√£o Modal agrupa ferramentas em contextos l√≥gicos (containers), acess√≠veis atrav√©s do Gateway Docker. O Antigravity conecta-se apenas ao Gateway, que gerencia o ciclo de vida dos containers sob demanda.

|**Modo (Segmento)**|**Fun√ß√£o Cognitiva**|**Ferramentas MCP (Dockerizadas)**|**Isolamento & Seguran√ßa**|
|---|---|---|---|
|**C√≥rtex (Pesquisa)**|Aquisi√ß√£o de Informa√ß√£o|`DuckDuckGo`, `Exa`, `YouTube Transcripts`, `Fetch`, `Context7`|Acesso √† Internet irrestrito. Sem acesso de escrita ao c√≥digo local.|
|**Soma (Execu√ß√£o)**|Manipula√ß√£o de C√≥digo|`Smart Coding MCP`, `Markitdown`, `MCP TOON`|Acesso de Leitura/Escrita ao `${workspaceFolder}`. Sem internet.|
|**Mem√≥ria (Reten√ß√£o)**|Gest√£o de Estado e Longo Prazo|`OpenMemory`, `Memory (Reference)`, `RLM (Aleph)`|Volumes Persistentes (SQLite/Postgres).|
|**Opera√ß√µes (Ops)**|Gest√£o de Projeto e Infra|`GitHub Project Manager`, `GitHub (Official)`, `Docker`|Acesso autenticado a APIs externas (OAuth).|
|**Auxiliar (Skills)**|Utilit√°rios Espec√≠ficos|`Time`, `OSP Marketing Tools`|Ferramentas de nicho ativadas sob demanda.|

### 3.2 An√°lise Detalhada dos MCPs no Ecossistema SODA

Abaixo, detalhamos como cada ferramenta solicitada se integra √† topologia do Gateway, justificando sua presen√ßa no fluxo de trabalho AH-SD.
#### 3.2.1 Ferramentas de Pesquisa e Contexto Externo

- **Exa vs. DuckDuckGo:**
    - DuckDuckGo : Utilizado para pesquisas r√°pidas, factuais e verifica√ß√£o de dados em tempo real. Baixo custo cognitivo.
    - _Exa:_ Utilizado para "Pesquisa Neural" ou sem√¢ntica. Quando o usu√°rio precisa encontrar "bibliotecas Python para orquestra√ß√£o de agentes" (conceito) em vez de uma string espec√≠fica. O Exa brilha na fase de Arquitetura do BMad.
- **YouTube Transcripts & Fetch:**
    - Permitem que o agente "assista" a tutoriais ou leia documenta√ß√£o t√©cnica (via `fetch`) e a converta em conhecimento utiliz√°vel (via `Markitdown` ). Isso alimenta o RLM (Aleph) sem que o usu√°rio precise ler manualmente.
- **Context7:**
    - Atua como uma camada de enriquecimento de dados, fornecendo contexto situacional adicional que pode n√£o estar expl√≠cito na query, ajudando a desambiguar inten√ß√µes vagas t√≠picas de momentos de dispers√£o.

#### 3.2.2 Ferramentas de Execu√ß√£o e C√≥digo

- Smart Coding MCP :
    - Diferente de uma busca textual (grep), este MCP cria embeddings do c√≥digo local. Ele permite que o agente entenda "onde est√° a l√≥gica de autentica√ß√£o" semanticamente. Para o AH-SD, isso elimina a frustra√ß√£o de ter que apontar arquivos espec√≠ficos para o agente. √â o "olho" t√©cnico do sistema.
- Markitdown & MCP TOON :
    - _Markitdown:_ Converte qualquer entrada (PDF, Excel, HTML) em Markdown limpo.
    - _MCP TOON:_ Otimizador cr√≠tico. Converte respostas JSON verbosas de APIs em formato TOON (Token-Oriented Object Notation), economizando 30-60% de tokens. Isso retarda o "desgaste" da janela de contexto, permitindo sess√µes de trabalho mais longas antes da degrada√ß√£o do modelo.

#### 3.2.3 Ferramentas de Mem√≥ria e Gest√£o

- OpenMemory :
    - Mem√≥ria epis√≥dica de longo prazo. Armazena prefer√™ncias do usu√°rio ("Prefiro TypeScript estrito") e decis√µes passadas. Essencial para evitar repeti√ß√£o de instru√ß√µes.
- GitHub Project Manager & GitHub Official :
    - Enquanto o MCP oficial lida com Pull Requests e Issues, o _Project Manager_ permite a gest√£o de Roadmaps e Sprints. Isso se integra ao BMad para manter o rastreamento do progresso alinhado com o reposit√≥rio remoto.

### 3.3 Mec√¢nica de Roteamento Inteligente (Gateway)

O Docker MCP Gateway atua como um "proxy reverso" para LLMs.

- **Configura√ß√£o Din√¢mica:** Em vez de carregar todos os schemas de ferramentas no prompt do sistema (o que consumiria milhares de tokens), o Gateway exp√µe um cat√°logo leve.
- **Ativa√ß√£o sob Demanda:** Quando o Antigravity detecta a necessidade de usar o `Exa`, ele envia a solicita√ß√£o ao Gateway. O Gateway, se o container `exa-mcp` estiver parado, inicia-o, executa a query, devolve a resposta e (configuravelmente) o suspende. Isso mant√©m a pegada de recursos da m√°quina local eficiente.

## 4. A Camada Cognitiva: Intelig√™ncia Contextual e Preserva√ß√£o

Para atender ao requisito de "contextualiza√ß√£o inteligente" sem repeti√ß√£o, implementamos um sistema de mem√≥ria em tr√™s n√≠veis, mimetizando a cogni√ß√£o humana.

### 4.1 N√≠vel 1: Mem√≥ria de Trabalho Externa (Plan-With-Files)

Baseado no padr√£o "Manus" , o **Plan-With-Files** √© a ferramenta mais cr√≠tica para o TDAH.
- **O Problema:** A mem√≥ria de trabalho biol√≥gica falha em manter a "pilha" de tarefas (o que fiz, o que estou fazendo, o que farei). O chat do LLM √© ef√™mero e sai de tela.
- **A Solu√ß√£o:** Esta ferramenta obriga o agente a manter tr√™s arquivos no disco:
    1. `task_plan.md`: O plano mestre.
    2. `findings.md`: O que foi descoberto (ex: limita√ß√µes de API).
    3. `progress.md`: O log imut√°vel do progresso.
- **Fluxo:** Antes de qualquer a√ß√£o, o agente _l√™_ o `task_plan.md`. Ap√≥s qualquer a√ß√£o, ele _atualiza_ o `progress.md`. Isso cria um "checkpoint" cognitivo permanente. Se o usu√°rio se distrair por 4 horas, o sistema n√£o perde o estado.

### 4.2 N√≠vel 2: Mem√≥ria Recursiva de Conhecimento (RLM - Aleph)

O **RLM (Recursive Language Model)** via Aleph resolve o problema do tamanho da documenta√ß√£o.
- **Mecanismo:** Em vez de colar a documenta√ß√£o do Next.js (5MB) no chat, o agente usa o Aleph. O Aleph carrega a documenta√ß√£o em um processo Python isolado. O agente faz perguntas ("Como configurar middleware no Next.js 14?"). O Aleph pesquisa recursivamente, sintetiza a resposta e devolve _apenas_ o par√°grafo relevante ao chat.
- **Benef√≠cio:** Contexto "infinito" virtual. O modelo nunca fica "cheio" com dados irrelevantes, mantendo a agilidade de racioc√≠nio.

### 4.3 N√≠vel 3: Mem√≥ria Epis√≥dica (OpenMemory)

O **OpenMemory** armazena a "personalidade" do projeto e do usu√°rio.
- **Integra√ß√£o com Rules:** Uma regra no Antigravity instrui o agente a consultar o OpenMemory no in√≠cio da sess√£o para recuperar o "Estilo de C√≥digo" e "Decis√µes Arquiteturais". Isso elimina a necessidade de o usu√°rio repetir: "Lembre-se que usamos Snake_Case no banco de dados".

## 5. A Camada de Protocolo: Spec-Driven Development (S.O.D.A. Core)

A estrutura "SODA" depende de especifica√ß√µes rigorosas para guiar a execu√ß√£o. Unimos aqui o **BMad Method** (Processo) com o **OpenSpec** (Protocolo).

### 5.1 O M√©todo BMad: Agilidade Estruturada para Mentes R√°pidas

O **Antigravity BMAD Config** fornece os _Workflows_ e _SOPs_ solicitados.
- **Fase de Planejamento (Dopamin√©rgica):** O usu√°rio AH-SD usa sua criatividade para interagir com os agentes `Analyst` e `Architect`. Eles geram o `PRD.md` e `ARCHITECTURE.md`.
- **Fase de Sharding (Gerenciamento de Foco):** O BMad "estilha√ßa" (shards) o projeto grande em arquivos de Hist√≥ria (`story-001.md`).
- **Impacto no TDAH:** O "sharding" √© vital. Ele transforma um projeto monobloco assustador em unidades at√¥micas. O agente (e o usu√°rio) s√≥ precisa carregar o contexto de _uma_ hist√≥ria por vez.

### 5.2 OpenSpec: O Contrato de Execu√ß√£o

O **OpenSpec** atua como a camada de valida√ß√£o.
- **Integra√ß√£o:** Usamos o OpenSpec para formalizar o `AGENTS.md` na raiz. Este arquivo define o estado atual do sistema globalmente.
- **Uso Pr√°tico:** Antes de iniciar um c√≥digo, o agente verifica se a especifica√ß√£o no OpenSpec est√° marcada como `APPROVED`. Isso impede a "execu√ß√£o prematura" t√≠pica da impulsividade, for√ßando uma pausa para planejamento.

## 6. O Motor de Execu√ß√£o: Ralph e ARC Protocol

Para automatizar a execu√ß√£o sem interven√ß√£o constante (o que gera desgaste), utilizamos o **Ralph** em conjunto com o **ARC Protocol**.

### 6.1 Ralph: O Loop de Contexto Fresco

O **Ralph** √© um script de loop infinito que executa agentes.
- **A Inova√ß√£o:** A cada itera√ß√£o do loop (ex: implementar uma fun√ß√£o), o Ralph _reinicia_ o contexto do agente.
- **O Ciclo:**
    1. O Agente nasce (Contexto Zero).
    2. L√™ `task_plan.md` e `progress.md` (Recupera Estado).
    3. Executa uma tarefa at√¥mica.
    4. Atualiza `progress.md`.
    5. O Agente morre.
- **Solu√ß√£o para o Desgaste:** Como o agente est√° sempre "fresco", ele nunca sofre de degrada√ß√£o de aten√ß√£o ou alucina√ß√£o induzida por contextos longos. √â a ferramenta perfeita para tarefas longas e repetitivas (refatora√ß√£o, testes).

### 6.2 ARC Protocol: Os Trilhos de Seguran√ßa

O **ARC (Analyze, Run, Confirm)** √© o protocolo de seguran√ßa.
- **Analyze:** O agente deve usar `Smart Coding MCP` para entender o impacto da mudan√ßa.
- **Run:** Executa a mudan√ßa.
- **Confirm:** O agente _deve_ criar um teste ou verifica√ß√£o e execut√°-lo. Se falhar, o loop do Ralph detecta e tenta novamente na pr√≥xima itera√ß√£o. Isso permite que o usu√°rio se afaste do computador, confiando que o agente n√£o destruir√° o c√≥digo.

## 7. Implementa√ß√£o T√©cnica: Configura√ß√£o das "Rules" e Gateway

Esta se√ß√£o detalha como configurar o sistema para "ativar de forma inteligente" as ferramentas.

### 7.1 Configura√ß√£o do Docker Gateway (`docker-compose.soda.yml`)

Esta configura√ß√£o levanta os MCPs solicitados e os exp√µe via Gateway.

```YAML
version: '3.8'
services:
  # O C√âREBRO: Docker MCP Gateway
  mcp-gateway:
    image: docker/mcp-gateway:latest [12]
    ports: ["8080:8080"]
    volumes:
      -./config/registry.json:/etc/mcp/registry.json
    environment:
      - MCP_gw_auth=false # Apenas localmente para reduzir fric√ß√£o

  # MODO: PESQUISA (Internet, Leitura)
  duckduckgo:
    image: mcp/duckduckgo:latest
  exa-search:
    image: mcp/exa:latest
  fetch-server:
    image: mcp/fetch:latest
  
  # MODO: EXECU√á√ÉO & C√ìDIGO (Local, An√°lise)
  smart-coding:
    image: omar-haris/smart-coding-mcp:latest [5]
    volumes:
      - ${PROJECT_ROOT}:/workspace:ro # Montagem segura
  toon-optimizer:
    image: jellyjamin/toon-mcp:latest [7]

  # MODO: MEM√ìRIA & INTELIG√äNCIA (Persist√™ncia)
  openmemory:
    image: caviraoss/openmemory:latest [9]
    volumes:
      - openmem_data:/data
  aleph-rlm:
    image: hmbown/aleph:latest [15]
    environment:
      - ALEPH_MAX_DEPTH=2

  # MODO: OPS & GEST√ÉO
  github-pm:
    image: kunwarvivek/mcp-github-project-manager:latest [11]
    environment:
      - GITHUB_TOKEN=${GH_TOKEN}
```

### 7.2 Configura√ß√£o de Rules no Antigravity (`GEMINI.md`)

Para evitar a "repeti√ß√£o de instru√ß√µes", usamos o arquivo de regras globais do Antigravity (`.agent/rules` ou `GEMINI.md`) para criar **Gatilhos Sem√¢nticos**. O LLM decide quando chamar a ferramenta baseada na inten√ß√£o, n√£o em comandos expl√≠citos.

**Arquivo:** `.agent/rules/soda-master.md`

---

## trigger: always_on priority: critical

# S.O.D.A. PROTOCOL - NEURO-ADAPTIVE CONTROLLER

## 1. INTELLIGENT ACTIVATION (SHADOW ROUTING)

You are connected to a Docker MCP Gateway. Do NOT hallucinate tool schemas.
Use the following **Semantic Triggers** to activate modes:
- **IF user intent is "RESEARCH/LEARN":**
    - Activate `exa-search` for conceptual queries (e.g., "Best architecture for X").
    - Activate `duckduckgo` for factual queries (e.g., "Latest version of React").
    - Activate `fetch-server` -> `markitdown` to ingest content.
    - **CONSTRAINT:** Always pipe large text results through `toon-optimizer` before reading.
- **IF user intent is "CODING/REFACTORING":**
    - Activate `smart-coding-mcp`. Use `search_code_by_meaning` first.
    - **CONSTRAINT:** Never blindly edit. Follow ARC Protocol (Analyze -> Run -> Confirm).
- **IF user intent is "PLANNING/STATUS":**
    - Activate `planning-with-files`. READ `task_plan.md` immediately.
    - Activate `github-pm` to sync with Roadmap.

## 2. CONTEXT PRESERVATION (ANTI-DECAY)

- **RLM Directive:** For any documentation query > 500 words, DO NOT read the file directly. Use `aleph-rlm` to extract specific answers.
- **Memory Directive:** Before asking the user for preferences, query `openmemory`.

## 3. MODAL SEGMENTATION

- Do NOT cross modes unnecessarily. Do not access `duckduckgo` while in a tight coding loop unless blocking error occurs.

### 7.3 Instala√ß√£o das Ferramentas ("Ag-Kit" & "Installables")

Seguindo o pedido de usar ferramentas instal√°veis:
1. **Ag-Kit Initialization:** Executar `npx @vudovn/ag-kit init` na raiz. Isso cria a estrutura `.agent`.
2. **BMad Overlay:** Clonar os templates do `antigravity-bmad-config` para dentro de `.agent/workflows`.
3. **Ralph Setup:** Instalar o script `ralph` na raiz e configur√°-lo para apontar para o bin√°rio do Antigravity CLI.

## 8. Simula√ß√£o de Cen√°rio: O Fluxo SODA na Pr√°tica

Para demonstrar a efic√°cia desta configura√ß√£o para o perfil AH-SD, simulamos a cria√ß√£o de um "M√≥dulo de Autentica√ß√£o OAuth2".
### Passo 1: Inicia√ß√£o e Planejamento (Sopas de Dopamina)

O usu√°rio tem a ideia. Em vez de se perder em detalhes, ele digita:

`> /bmad-plan "Sistema de Auth com suporte a GitHub e Google"`

- **A√ß√£o:** O Agente `Analyst` (BMad) acorda.
- **Intelig√™ncia:** Ele usa o **Exa** (via Gateway) para buscar "Best practices OAuth2 2026". Usa o **RLM (Aleph)** para ler a RFC do OAuth2 sem poluir o chat.
- **Resultado:** Gera um `PRD.md` estruturado. O usu√°rio revisa e aprova.
### Passo 2: Estrutura√ß√£o e Sharding (Controle Executivo)

O usu√°rio aprova o PRD. O Agente `Scrum Master` (BMad) entra em a√ß√£o.
- **A√ß√£o:** Ele quebra o PRD em 3 hist√≥rias: `story-01-setup.md`, `story-02-github.md`, `story-03-google.md`.
- **Mem√≥ria:** Ele usa o **GitHub Project Manager** para criar essas issues no reposit√≥rio real.
- **Persist√™ncia:** Ele cria o `task_plan.md` inicial via **Plan-With-Files**.
### Passo 3: O "Grind" Automatizado (Ralph Loop)

O usu√°rio sente a energia baixar (t√©dio com boilerplate). Ele digita:
`>./ralph.sh --story story-01-setup.md`
- **Itera√ß√£o 1:** O Ralph inicia um contexto limpo. O agente l√™ `story-01`. Usa `Smart Coding MCP` para ver onde criar os arquivos. Escreve o c√≥digo base. Atualiza `progress.md`. Termina.
- **Itera√ß√£o 2:** O Ralph reinicia. L√™ `progress.md`. V√™ que falta configurar o Dockerfile. Usa `Context7` para inferir a vers√£o correta do Node.js. Escreve o Dockerfile. Termina.
- **Itera√ß√£o 3:** O Agente executa os testes (ARC Protocol). Falha. Ele l√™ o erro, pesquisa no `StackOverflow` (via `DuckDuckGo`), corrige e passa.
### Passo 4: Retomada (Revis√£o)

O usu√°rio volta horas depois. O sistema est√° parado, esperando revis√£o. O `progress.md` detalha exatamente o que foi feito. O usu√°rio n√£o precisa "recarregar" o contexto mentalmente; est√° tudo no arquivo.

## 9. Conclus√£o: A S√≠ntese do Exoc√≥rtex

A refina√ß√£o do entendimento do SODA para o seu cen√°rio espec√≠fico revela que a chave n√£o √© apenas "ter as ferramentas", mas **como elas s√£o orquestradas para compensar d√©ficits espec√≠ficos e alavancar altas habilidades**.

Ao unir o **Google Antigravity** (Hospedeiro), o **Docker MCP Gateway** (Seguran√ßa e Segmenta√ß√£o) e o **Processo BMad/Ralph** (Estrutura Cognitiva), criamos um sistema que:

1. **Protege o Foco:** Atrav√©s da segmenta√ß√£o modal e ativa√ß√£o inteligente de ferramentas.
2. **Estende a Mem√≥ria:** Atrav√©s do Plan-With-Files, RLM e OpenMemory.
3. **Automatiza a Rotina:** Atrav√©s dos loops do Ralph.

Esta √© a materializa√ß√£o do **Paradigma S.O.D.A.** como uma tecnologia assistiva de ponta para a mente neurodivergente de alta performance.

---

### Tabela de Refer√™ncia de Ferramentas e Fun√ß√µes

| **Ferramenta**         | **Fun√ß√£o no SODA**                 | **Origem/Ref** |
| ---------------------- | ---------------------------------- | -------------- |
| **Google Antigravity** | IDE Host & Orquestrador            |                |
| **Docker MCP Gateway** | Roteador Modal & Seguran√ßa         |                |
| **Ag-Kit**             | Instalador Base de Agentes         |                |
| **BMad Method**        | Metodologia de Planejamento (SOPs) |                |
| **OpenSpec**           | Protocolo de Valida√ß√£o             |                |
| **Ralph**              | Executor de Loop (Contexto Fresco) |                |
| **Plan-With-Files**    | Mem√≥ria de Trabalho Persistente    |                |
| **Aleph (RLM)**        | Pesquisa Recursiva (Anti-Decay)    |                |
| **Smart Coding MCP**   | Busca Sem√¢ntica de C√≥digo          |                |
| **OpenMemory**         | Mem√≥ria Epis√≥dica                  |                |
| **TOON Context**       | Otimizador de Tokens               |                |
| **GitHub PM MCP**      | Gest√£o de Roadmap                  |                |

---
## (COMPLEMENTO) Implementa√ß√£o T√©cnica: S.O.D.A. (Spec-Oriented Dockerized Architecture)

Consolidando a vis√£o organizacional (SOPs) com a execu√ß√£o t√©cnica no **Google Antigravity**, otimizada para o perfil **TDAH + AH-SD (Altas Habilidades/Superdota√ß√£o)**.

O perfil AH-SD caracteriza-se por uma velocidade de processamento r√°pida e criatividade intensa, mas suscet√≠vel ao t√©dio com tarefas repetitivas e "perda de RAM" (mem√≥ria de trabalho) em processos longos. O SODA serve como o **lastro estrutural** para essa mente veloz.

---

## 1. A Converg√™ncia: SOPs Originais vs. M√©todo BMad

O **M√©todo BMad** (Breakthrough Method for Agile AI-Driven Development) atua como o motor de fluxo de trabalho. Ele n√£o descarta seus 22 SOPs; ele os agrupa em fases l√≥gicas geridas por agentes espec√≠ficos.

Abaixo, o mapeamento definitivo de como seus 22 SOPs s√£o executados pelos Agentes BMad e pelas Ferramentas MCP selecionadas.

### Fase 1: Planejamento e Especifica√ß√£o (Agentes: Analyst & Product Manager)

_Foco: Externalizar a vis√£o criativa do AH-SD para documentos concretos._

|**SOP Original**|**Agente Respons√°vel**|**Ferramenta / Skill Ativada**|**A√ß√£o no Antigravity**|
|---|---|---|---|
|**01. Neg√≥cio**|`Analyst`|**OSP Marketing Tools**|Gera Value Map e Estrat√©gia usando metodologia OSP.|
|**02. Gloss√°rio**|`Analyst`|**Context7**|Busca termos t√©cnicos atualizados e define vocabul√°rio ub√≠quo.|
|**03. PRD**|`Product Manager`|**OpenSpec**|Cria√ß√£o do `PRD.md` estruturado e validado.|
|**04. Gherkin**|`QA Agent`|**Markitdown**|Converte requisitos em cen√°rios de teste `.feature`.|

### Fase 2: Arquitetura e Solu√ß√£o (Agente: Architect)

_Foco: Desenho de sistemas complexos (ponto forte do AH-SD) sem fadiga de documenta√ß√£o._

|**SOP Original**|**Agente Respons√°vel**|**Ferramenta / Skill Ativada**|**A√ß√£o no Antigravity**|
|---|---|---|---|
|**05. Flows**|`Architect`|**Mermaid/Graphviz**|Gera diagramas de sequ√™ncia visual.|
|**07. Design Sys**|`UX Agent`|**Fetch + Context7**|Recupera docs de UI Libraries (ex: Shadcn/MUI) atualizados.|
|**08. OpenAPI**|`Architect`|**OpenSpec**|Define contratos de API (Swagger) antes do c√≥digo.|
|**09. DDR**|`Architect`|**RLM (Aleph)**|Pesquisa recursiva para validar decis√µes t√©cnicas (Design Decision Record).|
|**10. Seguran√ßa**|`SecOps`|**DuckDuckGo**|Valida CVEs e pr√°ticas de seguran√ßa atuais.|

### Fase 3: Constru√ß√£o e Implementa√ß√£o (Agentes: Scrum Master & Developer)

_Foco: O "Grind" de c√≥digo onde o TDAH costuma perder o foco. O Ralph Loop assume aqui._

|**SOP Original**|**Agente Respons√°vel**|**Ferramenta / Skill Ativada**|**A√ß√£o no Antigravity**|
|---|---|---|---|
|**11. Coding**|`Developer` (Ralph)|**Smart Coding MCP**|Busca sem√¢ntica no c√≥digo existente para manter consist√™ncia.|
|**12. Env**|`DevOps`|**Docker MCP**|Configura√ß√£o autom√°tica de containers e vari√°veis.|
|**13. Auto-Doc**|`Doc Writer`|**Plan-With-Files**|Mant√©m `progress.md` e `findings.md` atualizados em tempo real.|
|**14. Tests**|`QA Agent`|**ARC Protocol**|Ciclo "Analyze, Run, Confirm" para TDD rigoroso.|
|**19. i18n**|`Developer`|**Context7**|Verifica padr√µes de localiza√ß√£o de bibliotecas atuais.|

### Fase 4: Entrega e Opera√ß√£o (Agentes: DevOps & SRE)

_Foco: Finaliza√ß√£o e Deploy (frequentemente negligenciados)._

|**SOP Original**|**Agente Respons√°vel**|**Ferramenta / Skill Ativada**|**A√ß√£o no Antigravity**|
|---|---|---|---|
|**16. Migrations**|`DevOps`|**Docker MCP**|Executa scripts de banco de dados em ambiente isolado.|
|**17. CI/CD**|`DevOps`|**GitHub Project Manager**|Sincroniza status de issues e dispara actions.|
|**20. LGPD**|`SecOps`|**RLM (Aleph)**|Varredura de conformidade em dados sens√≠veis.|
|**22. Rel. Notes**|`Product Manager`|**GitHub Official**|Gera changelog baseado nos commits e PRD.|

---

## 2. Arquitetura T√©cnica: Segmenta√ß√£o via Docker Gateway

Para evitar que o "Contexto Inteligente" se degrade com excesso de ferramentas, usamos o **Docker MCP Gateway** para segmentar o acesso. O Antigravity conecta-se apenas ao Gateway, que roteia a solicita√ß√£o para o container correto.

### 2.1 Topologia dos Containers (Docker Compose SODA)

```YAML
# docker-compose.soda.yml
version: '3.8'
	services:
	  # --- C√âREBRO: Roteamento e Controle ---
	  gateway:
	    image: docker/mcp-gateway:latest
	    ports: ["8080:8080"]
	    volumes:
	      -./config/routing_rules.json:/etc/mcp/routing.json
	
	  # --- MEM√ìRIA (Persist√™ncia e Contexto) ---
	  memory-core:
	    image: caviraoss/openmemory:latest  # [9] Mem√≥ria Epis√≥dica
	    volumes: ["./.agent/memory:/data"]
	  
	  plan-tracker:
	    image: othmanadi/planning-with-files:latest # [10] Mem√≥ria de Trabalho (Manus Pattern)
	    volumes:
	
	  # --- C√ìRTEX (Pesquisa e Conhecimento) ---
	  context-loader:
	    image: upstash/context7-mcp:latest # Docs atualizados (Bibliotecas, Frameworks)
	  
	  deep-research:
	    image: hmbown/aleph-rlm:latest #  Pesquisa Recursiva (Deep Dives)
	
	  # --- SOMA (Execu√ß√£o e Ferramentas) ---
	  strategy-ops:
	    image: open-strategy-partners/marketing-tools:latest # Business Logic & Value Maps
	  
	  code-sense:
	    image: omar-haris/smart-coding-mcp:latest # [11] Busca Sem√¢ntica no C√≥digo Local
	  
	  git-manager:
	    image: kunwarvivek/github-project-manager:latest #  Gest√£o de Projetos
```

### 2.2 Regras de Ativa√ß√£o Inteligente (Antigravity Rules)

Para atender ao requisito de "ativar de forma inteligente sem se repetir", configuramos regras no `.agent/rules/soda.md`. O LLM ler√° isso no system prompt e saber√° **quando** usar cada ferramenta.

## **Arquivo:** `.agent/rules/soda.md`

## trigger: always_on priority: critical

# SODA PROTOCOL - INTELLIGENT ROUTING

1. **Mem√≥ria e Continuidade (PRIMEIRA A√á√ÉO)**
    - Ao iniciar qualquer tarefa, LEIA `task_plan.md` usando a tool `plan-tracker`.
    - Antes de perguntar prefer√™ncias ao usu√°rio, consulte `memory-core`.
2. **Aquisi√ß√£o de Conhecimento (Context7 vs. RLM)**
    - Se precisar de sintaxe de lib (ex: "Como usar Shadcn?"), use `context-loader` (Context7).
    - Se precisar de conceito complexo ou decis√£o (ex: "Qual a melhor arquitetura?"), use `deep-research` (RLM/Aleph).
3. **Estrat√©gia de Neg√≥cio (OSP)**
    - Ao definir requisitos (SOP-01/03), use `strategy-ops` para validar o Value Map. N√£o invente; siga o m√©todo OSP.
4. **Execu√ß√£o de C√≥digo (Ralph Loop)**
    - Use `code-sense` para entender o impacto da mudan√ßa antes de escrever.
    - Todo c√≥digo gerado deve passar pelo protocolo ARC (Analyze -> Run -> Confirm).

---

## 3. Fluxo de Trabalho Integrado (O "Bootstrap")

Como o sistema se auto-instala e valida as ferramentas (SOP-00).

### 3.1 Instala√ß√£o (Ag-Kit + Docker)

O usu√°rio executa um comando √∫nico no terminal do Antigravity. Este comando utiliza o `ag-kit` para baixar os templates e subir os containers.

```Bash
# Script: soda_bootstrap.sh
echo "ü•§ Inicializando SODA v1.5..."

# 1. Baixar Estrutura BMad e Skills via Ag-Kit
npx @vudovn/ag-kit init --template bmad-advanced

# 2. Configurar OpenSpec para valida√ß√£o
npm install -g @fission-ai/openspec
openspec init

# 3. Subir a Infraestrutura Dockerizada (Gateway + Tools)
docker-compose -f docker-compose.soda.yml up -d

# 4. Validar Conex√µes (Self-Healing)
echo "üîç Validando MCPs..."
curl -s http://localhost:8080/health | grep "ok" |

| echo "‚ö†Ô∏è Erro no Gateway"

# 5. Criar Mem√≥ria Inicial
touch task_plan.md progress.md findings.md
```

### 3.2 O "Loop" do Dia a Dia (Ralph + Plan-With-Files)

Para o perfil AH-SD, o maior risco √© parar no meio do caminho. O fluxo SODA mitiga isso:
1. **Entrada:** Usu√°rio digita `/plan "Nova feature de Login"`.
2. **Agente Analyst (BMad):**
    - Usa **OSP Marketing** para alinhar valor.
    - Usa **Context7** para verificar docs do Auth.js mais recente.
    - Escreve no `task_plan.md`.
3. **Agente Developer (Ralph Loop):**
    - L√™ `task_plan.md`.
    - Entra em loop: Escreve c√≥digo -> Usa **Smart Coding** para verificar -> Roda Teste (**ARC**).
    - A cada sucesso, atualiza `progress.md`.
4. **Interrup√ß√£o:** Se o usu√°rio sair, o `progress.md` e o `memory-core` (OpenMemory) guardam o estado exato. Ao voltar, o sistema "lembra" de tudo.

---

## 4. Por que essa configura√ß√£o serve ao TDAH + AH-SD?

1. **Elimina√ß√£o da "P√°gina em Branco":** O **BMad** gera a estrutura inicial (Epics/Stories) automaticamente, ativando o sistema de recompensa do c√©rebro rapidamente.
2. **Redu√ß√£o de Ru√≠do:** O **Docker Gateway** esconde a complexidade. O agente tem 50 ferramentas, mas o usu√°rio s√≥ v√™ o resultado.
3. **Hiperfoco Sustentado:** O **Ralph Loop** cuida dos detalhes chatos (linting, imports), permitindo que o usu√°rio AH-SD foque na arquitetura e na solu√ß√£o de problemas complexos ("A Grande Imagem").
4. **Mem√≥ria Externa:** **Plan-With-Files** e **OpenMemory** garantem que nenhuma ideia brilhante seja esquecida, mesmo que a aten√ß√£o mude de foco momentaneamente.

Esta revis√£o unifica o rigor dos seus 22 SOPs com a modernidade da arquitetura de agentes do Antigravity, eliminando a contradi√ß√£o anterior.

---
## Refatora√ß√£o Skills e Workflows (Ag-KIT + BMad) & 22 SOPs

Ao "refatorar" o BMad para injetar seus 22 SOPs como instru√ß√µes de sistema (System Prompts) e usar o Ag-Kit/Antigravity como motor, voc√™ transforma processos manuais em **gatilhos sem√¢nticos**. Isso elimina a necessidade de voc√™ "gerenciar" o processo cognitivamente a todo momento; o sistema assume o peso da estrutura.

Aqui est√° a valida√ß√£o l√≥gica desse fluxo "SODA Refatorado":
### 1. O Novo Fluxo L√≥gico (Slash Commands como Gatilhos de SOP)

Em vez de consultar um manual PDF com 22 passos, voc√™ digita comandos que invocam agentes especializados j√° treinados nesses passos.

- **Idealiza√ß√£o & Refinamento (SOP 01-03):**
    - **Comando:** `/plan "Quero um sistema de Auth"`
    - **O que acontece:** O agente `Analyst` (BMad) acorda. Ele carrega as regras do SOP-01 (Neg√≥cio) e SOP-03 (PRD) do seu arquivo de _Rules_. Ele entrevista voc√™, refina a ideia e gera o arquivo `PRD.md`.
    - **Tecnologia:** Usa **OpenSpec** para validar se o PRD est√° completo antes de permitir avan√ßar.
- **Arquitetura & Documenta√ß√£o (SOP 04-10):**
    - **Comando:** `/arch`
    - **O que acontece:** O agente `Architect` l√™ o `PRD.md`. Ele consulta o **Context7** para ver as documenta√ß√µes mais recentes (SOP-07) e usa o **RLM (Aleph)** para decis√µes t√©cnicas complexas (SOP-09 DDR). Ele gera diagramas e especifica√ß√µes de API [],.
- **Cria√ß√£o & Controle de Tarefas (Gerenciamento de Estado):**
    - **Comando:** `/tasks` ou `/shard`
    - **O que acontece:** Aqui entra o **GitHub Project Manager MCP**. O agente `Scrum Master` quebra a arquitetura em _User Stories_ pequenas e cria _Issues_ reais no seu GitHub Project. Isso externaliza a mem√≥ria de "o que precisa ser feito" para uma ferramenta visual (Kanban), vital para n√£o se perder no processo.
- **Execu√ß√£o Granular & Orquestra√ß√£o (SOP 11-15):**
    - **Comando:** `/code story-1` ou `/ralph`
    - **O que acontece:** O loop do **Ralph** inicia. Ele pega a _Issue_ do GitHub, l√™ a doc t√©cnica e come√ßa a codificar. Ele usa o **Smart Coding MCP** para navegar no c√≥digo semanticamente. Ele roda os testes (SOP-14) automaticamente. Voc√™ s√≥ interv√©m se ele travar ou para revisar.

### 2. Por que isso funciona para o seu perfil (AH-SD + TDAH)

1. **Higiene de Contexto:** Os comandos `/` (Slash Commands) funcionam como "interruptores de modo". Quando voc√™ digita `/arch`, o Antigravity carrega _apenas_ as ferramentas e regras de arquitetura. Isso impede que o contexto do LLM (e o seu c√©rebro) fique polu√≠do com detalhes de implementa√ß√£o prematuros.
2. **Feedback Visual Imediato:** A cria√ß√£o autom√°tica de _Issues_ no GitHub Projects e arquivos Markdown (`PRD.md`, `ARCHITECTURE.md`) d√° a sensa√ß√£o concreta de progresso, liberando dopamina e combatendo a ansiedade de "n√£o ter feito nada".
3. **Seguran√ßa Psicol√≥gica:** Saber que os 22 SOPs est√£o "embutidos" nos agentes significa que voc√™ n√£o precisa ter medo de esquecer um passo importante (como Seguran√ßa ou LGPD). O agente `SecOps` ser√° invocado automaticamente pelo fluxo quando necess√°rio.

Portanto, **refatorar o BMad para usar seus SOPs como "alma" e o Ag-Kit como "corpo" √© o caminho correto**. Voc√™ mant√©m a alta capacidade de idealiza√ß√£o (AH) fluindo atrav√©s dos comandos, enquanto o sistema cuida da execu√ß√£o estruturada (TDAH).